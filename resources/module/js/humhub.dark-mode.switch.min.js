humhub.module("dark-mode.switch",(function(t,a,e){let d,r,n;t.initOnPjaxLoad=!0,t.initOnAjaxLoad=!0;function m(){h(e('input[name="UserSetting[darkMode]"]:checked').val())}function o(){h(n)}function h(t){"light"==t?(e("html").attr("data-bs-theme","light"),e("html").attr("data-dark-mode-default",!1)):"dark"==t?(e("html").attr("data-bs-theme","dark"),e("html").attr("data-dark-mode-default",!1)):(e("html").attr("data-dark-mode-default",!0),window.matchMedia("(prefers-color-scheme: dark)").matches?e("html").attr("data-bs-theme","dark"):e("html").attr("data-bs-theme","light"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{e("html").attr("data-dark-mode-default")&&"false"!=e("html").attr("data-dark-mode-default")&&(window.matchMedia("(prefers-color-scheme: dark)").matches?e("html").attr("data-bs-theme","dark"):e("html").attr("data-bs-theme","light"))})))}t.export({init:function(){e((function(){d=e("#usersetting-darkmode"),r=e("button[data-modal-close]"),$cancelIcon=e('button[data-bs-dismiss="modal"]'),n=e('input[name="UserSetting[darkMode]"]:checked').val(),d.on("input",m),r.on("click",o),$cancelIcon.on("click",o)}))}})}));